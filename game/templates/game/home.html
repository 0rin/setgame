{% load static %}

<!DOCTYPE html>
<!-- Comments like this -->
<html>
  <head>
    <meta charset="utf-8">
    <title>Set Game</title>
      <!-- Core Stylesheet -->
  <link rel="stylesheet" href="{% static '/game/css/game.css' %}">
  <script src="{% static '/game/js/home.js' %}"></script>
  </head>
  <body>
    <h3>sets found:{{ number_sets_found }}</h3>

    {% if cards_open %}
        {% for card in cards_open %}
            {% if forloop.counter == 1 or forloop.counter == 5 or forloop.counter == 9 %}
                <div class="row">
            {% endif %}
            <form action="{% url 'new_game' %}"
                  method="POST"
                  id="cardForm">
            {% csrf_token %}
                <button type="button"
                    class="card_outline {{ card.blank }}"
                    id="{{ card.id }}"
                    name="req"
                    value="card_clicked"
                    onclick="cardClicked(this.id,
                                        '{{ card.color }}',
                                        '{{ card.number }}',
                                        '{{ card.shading }}',
                                        '{{ card.shape }}'
                                        )">
            {% for n in card.range %}
                <svg class="svg_element"
                    width="200" height="60"
                    viewBox="0 0 1400 700">
                <defs>
                    <linearGradient
                        gradientUnits="objectBoundingBox"
                        id="stripes_{{ card.color }}"
                        spreadMethod="repeat"
                        x1="0%" x2="10%" y1="0%" y2="10%"
                        gradientTransform="rotate(-45) scale(0.3)">
                        <stop offset="0.2"
                              stop-color="{{ card.color }}"
                              stop-opacity="1"/>
                        <stop offset="0"
                              stop-color="white"
                              stop-opacity="1"/>
                    </linearGradient>
                </defs>
                {% if card.shape == 'oval' %}
                    <ellipse class="{{ card.shape }} {{ card.color }}
                        {{ card.shading }} {{ card.color }}_{{ card.shading }}"
                        cx="655.998" cy="385.524" rx="642.153" ry="192.539"/>
                {% elif card.shape == 'diamond' %}
                    <path class="{{ card.shape }} {{ card.color }}
                        {{ card.shading}} {{ card.color }}_{{ card.shading }}"
                        d="M0,-4l-4,4l4,4l4,-4z"
                        transform="matrix(160, 0, 0, 53, 660, 397.02)"/>
                {% elif card.shape == 'rectangle' %}
                    <rect class="{{ card.shape }} {{ card.color }}
                        {{ card.shading}} {{ card.color }}_{{ card.shading }}"
                        x="60" y="130" width="1200" height="350"/>
                {% endif %}
                </svg>
            {% endfor %}
            </button>
            </form>
            <div class="column_space"></div>
            {% if forloop.counter == 4 or forloop.counter == 8 or forloop.counter == 12 %}
                </div>

            {% endif %}
        {% endfor %}
    {% endif %}
    <form action="{% url 'new_game' %}" method="POST">
        {% csrf_token %}
        <button class="button" id="new_game" type="submit" name="req"
            value="new_game">
            New Game
        </button>
    </form>
    <form action="{% url 'new_game' %}" method="POST">
        {% csrf_token %}
        <button class="button" id="check_set" type="submit" name="req"
            value="check_set">
            Set?
        </button>
    </form>
    {% if set_existence_requested %}
        {% if a_set %}
            <script type="text/javascript">
                    (function () {
                    alert('There is a set. Want a hint?')
                    } ());
                    console.log('{{ a_set.id }}')
                    (function () {
        document.getElementById('{{ a_set.id }}').style.background = "lightGrey"
                    } ());
                </script>
        {% else %}
            <script type="text/javascript">
                (function () {
                    alert('There is no set.')
                } ());
            </script>
        {% endif %}
    {% endif %}
  </body>
</html>



